<%= line_chart d.lines, library: { pointsVisible: "true", pointSize: 2, interpolateNulls: "true" } %>

<div id="chartRawGoogle"></div>
<script type="text/javascript">
	google.load("visualization", "1", {packages:["corechart"]});
	google.setOnLoadCallback(drawChart);
	function drawChart() {

		var options = {
			pointsVisible: "false",
			interpolateNulls: "true",
			legend: 'none',
			hAxis: { minValue: 0, maxValue: 9 },
			curveType: 'function',
			//pointSize: 7,
			dataOpacity: 0.3
		};

		var chart = new google.visualization.LineChart(document.getElementById('chartRawGoogle'));

		var data = new google.visualization.DataTable();
		data.addColumn('date', 'Time'); // X

		var row = -1;
		var col = -1;

		<% d.lines.each do |line| %>
		data.addColumn('number', '<%= line[:name]%>');
		<% end %>

		<% d.lines.each do |line| %>
			row++;
			<% line[:data].each do |data| %>
				<% if data[2].nil? then
					@val = 'null'
			    else
					@val = "'point { size: 18; shape-type: star; fill-color: #a52714'"
			    end	%>

				col++;
				data.addRows([ [new Date('<%= data[0] %>'), <%= data[1] %>]	]);
			<% end %>
		<% end %>
		chart.draw(data, options);
	}
</script>
