# tiny-forecast

The goal of this program is to draw a graph which allows a forecast for a softare project be ready on time.

For this we use a xy line chart, which compares the current status of a project with a best should be status. 
The best should be status is computed by a modified _logistical function_.

![A s-curve generated by this program][s-curve]

## What this program is
 
 - provide a webserver and a customizeable html page with a graph
 - it is based on the library chartkick and therefore on google charts 
   - it can be configured the same way as google charts can be.
   - it runs completly in your clients browser. No data is sent to external servers (See https://developers.google.com/chart/interactive/docs/gallery/linechart bottom of page)
 - it computes the logistic function for you and provide a customizeable interface
 - ~~it shows milestones or deadlines as vertical lines in your graph~~ (not yet)
 
## What this program is not

 - It cannot collect data from various data sources
 - It cannot aggregate data
 - It does not have a permission system, everything is public.

# Installation

```
gem install bundle
bundle install
```

All data files are stored in yaml format inside the conf directory.

Based on this libraries:

 - sinatra
 - chartkick
 - google charts

## Adding own reports

To create a now project calls _my-awsome-project_, follow this steps:

 1. Add a file called `my-awsome-project-data.yaml` to directory `conf`.
 2. Add a file called `my-awsome-project-config.yaml` to directory `conf`.
 3. Optionally add a file called `my-awsome-project.erb` to directory `webapp/views`.

The ERB file must have at least this content:

```html
<!DOCTYPE html>
<html>
<head>
	<title><%= d.title %></title>
	<meta charset="utf-8">
    <script src="//www.google.com/jsapi"></script>
    <script src="/chartkick.js"></script>
</head>
<body>
<%= line_chart d.lines, library: { pointsVisible: "false", interpolateNulls: "true" } %>

```

The yaml file format can be taken from [sample-data.yaml](conf/sample-data.yaml) and [sample-config.yaml](conf/sample-config.yaml). Always required is

 - an end date for the project
 - at least 1 label

## Collecting data

 - Write a 2nd program, which collects data from your local systems, e.g. jira, redmine, ...
 - Let this project write a yaml file (e.g. my-awsome-project-data.yaml) and store it in directory conf.
 - Run this program regulary, e.g. once a day, using a cronjob.

# Usage

To start in foreground:

```
rake run
```

Then in a browser open http://localhost:4567/charts/sigma/sample.html.

# Security remarks

The current implementation of this program is insecure. I started it as a prototype and make no thoughts about
 
- XSS 
- file inclusion
- remote code execution
- ...

# Logistical function

![A s-curve generated by this program][s-curve]

T.B.D.

## Factors

Factors are optional. They are used to define the growing factor of your curve.

The original logistical function assumes growing is always constant. In a project this means, during the 
whole time the team is motivated equally all the time or the project team is staffed eqally alll the time. 
Because this is not the case, you can change the growing rules depening on time. E.g. in the team I work most
of the time, we get stories done early in the project quicker, because it takes some time to get the complicated
stories accepted and completly specified.

The configuration

```
  factors:
    - 0.5 0.8
    - 0.7 1.0
    - 1.1 1.5
```

means:

 - use factor 0.8 if less than 50% (0.5) of the project time is gone.
 - use factor 0.7 if less than 70% (0.7) of the project time is gone.
 - else use factor 1.5


# License & Feedback

This program is licensed under the MIT license. See LICENSE for details.

If you have feedback or suggestions, use the [https://github.com/ckaiser79/tiny-forecast/issues github issuetracker].

# References

 - https://developers.google.com/chart/interactive/docs/gallery/linechart
 - https://github.com/ckaiser79/tiny-forecast
 - https://de.wikipedia.org/wiki/Logistische_Funktion (German)
 - https://en.wikipedia.org/wiki/Logistic_function
 
[s-curve]: doc/s-curve.png "S Curve Sample" 
